#{extends 'main.html' /}
#{set title:'Home' /}

<script type="text/javascript" charset="utf=8">
    $(function() {
        $("#tabs").tabs();
    });
    
    #{if admin}
    
    
    #{/if}
    
    // This function creates a standard table with column/rows
    // Parameter Information
    // objArray = Anytype of object array, like JSON results
    // theme (optional) = A css class to add to the table (e.g. <table class="<theme>">
    // enableHeader (optional) = Controls if you want to hide/show, default is show
    function CreateTableView(objArray, theme, enableHeader) {
        // set optional theme parameter
        if (theme === undefined) {
            theme = 'mediumTable'; //default theme
        }

        if (enableHeader === undefined) {
            enableHeader = true; //default enable headers
        }

        // If the returned data is an object do nothing, else try to parse
        var array = typeof objArray != 'object' ? JSON.parse(objArray) : objArray;

        var str = '<table class="' + theme + '">';

        // table head
        if (enableHeader) {
            str += '<thead><tr>';
            for (var index in array[0]) {
                str += '<th scope="col">' + index + '</th>';
            }
            str += '</tr></thead>';
        }

        // table body
        str += '<tbody>';
        for (var i = 0; i < array.length; i++) {
            str += (i % 2 == 0) ? '<tr class="alt">' : '<tr>';
            for (var index in array[i]) {
                str += '<td>' + array[i][index] + '</td>';
            }
            str += '</tr>';
        }
        str += '</tbody>'
        str += '</table>';
        return str;
    }

    // This function creates a details view table with column 1 as the header and column 2 as the details
    // Parameter Information
    // objArray = Anytype of object array, like JSON results
    // theme (optional) = A css class to add to the table (e.g. <table class="<theme>">
    // enableHeader (optional) = Controls if you want to hide/show, default is show
    function CreateDetailView(objArray, theme, enableHeader) {
        // set optional theme parameter
        if (theme === undefined) {
            theme = 'mediumTable';  //default theme
        }

        if (enableHeader === undefined) {
            enableHeader = true; //default enable headers
        }

        // If the returned data is an object do nothing, else try to parse
        var array = typeof objArray != 'object' ? JSON.parse(objArray) : objArray;

        var str = '<table class="' + theme + '">';
        str += '<tbody>';

        for (var i = 0; i < array.length; i++) {
            var row = 0;
            for (var index in array[i]) {
                str += (row % 2 == 0) ? '<tr class="alt">' : '<tr>';

                if (enableHeader) {
                    str += '<th scope="row">' + index + '</th>';
                }

                str += '<td>' + array[i][index] + '</td>';
                str += '</tr>';
                row++;
            }
        }
        str += '</tbody>'
        str += '</table>';
        return str;
    }

    function selectionChanged(part_id, listElement) {
        var listAction = #{jsAction @infoPanel(':part', ':id') /};
        var ind = listElement.options[listElement.selectedIndex].value;
        $.get(listAction({part: part_id, id: ind}), function(data) {
            $("#"+part_id+"_info").html(CreateDetailView([data]));
        });
    }
    
    function getCurrentPartId(part) {
        var listElement = document.getElementById(part+"list");
        return listElement.options[listElement.selectedIndex].value;
    }
    function getCurrentBuildId() {
        var listElement = document.getElementById("buildlist");
        //alert(listElement.options[listElement.selectedIndex].value);
        return listElement.options[listElement.selectedIndex].value;
    }
    
    function removeFromOptionList(list, id) {
    	var optionlist = document.getElementById(list).options;
    	for (var i = 0; i<list.length; i++) {
    		if ((optionlist[i] != null) && (optionlist[i].value == id)) {
    			optionlist[i] = null;
    		}
    	}
    }
    function selectListCurrent(listid) {
    	var listid = document.getElementById(listid);
    	return listid.options[listid.selectedIndex].value;
    }
    
</script>

#{current /}
<div id="tabs">
	<ul>
	<li><a href="#tabs-1">CPU</a></li>
	<li><a href="#tabs-2">GPU</a></li>
	<li><a href="#tabs-3">RAM</a></li>
	<li><a href="#tabs-4">HD</a></li>
	<li><a href="#tabs-5">Motherboard</a></li>
	<li><a href="#tabs-6">PSU</a></li>
	</ul>
	#{part part:'CPU', data: cpus, id:1, admin:admin /}
	#{part part:'GPU', data: gpus, id:2, admin:admin /}
	#{part part:'RAM', data: rams, id:3, admin:admin /}
	#{part part:'HD', data: hds, id:4, admin:admin /}
	#{part part:'MB', data: mbs, id:5, admin:admin /}
	#{part part:'PSU', data: psus, id:6, admin:admin /}
</div>

#{build builds:builds /}

#{add_section /}